<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.personal.yaoge.mybatis.dao.user.dao.inter.UsersBooksDao">
	<cache eviction="FIFO" flushInterval="10000">
	</cache>

	<resultMap id="usersBooksPropertyDO" type="UsersBooksDO">
		<result property="id" column="id" javaType="java.lang.Integer" />
		<result property="booksName" column="books_name" javaType="java.lang.String" />
		<result property="booksTag" column="books_tag" javaType="java.lang.String" />
		<result property="booksAuthor" column="books_author" javaType="java.lang.String" />
		<result property="booksAmount" column="books_amount" javaType="java.lang.Integer" />
		<result property="booksStoragetime" column="books_storagetime" javaType="java.lang.String" />
		<result property="booksText" column="books_text" javaType="java.lang.String" />
		<result property="booksPath" column="books_path" javaType="java.lang.String" />
		<result property="books_pic" column="books_pic" javaType="java.lang.String" />
		<result property="books_xiazai" column="books_xiazai" javaType="java.lang.Integer" />
		<result property="books_limit" column="books_limit" javaType="java.lang.Integer" />
		<result property="books_uploader" column="books_uploader" javaType="java.lang.String" />
		<result property="books_type" column="books_type" javaType="java.lang.String" />
	</resultMap>

	<insert id="create" parameterType="UsersDO" flushCache="true"
		timeout="2000"><!-- keyProperty="id"useGeneratedKeys="true" -->
		<selectKey keyProperty="id" order="BEFORE" resultType="java.lang.Integer">
			select MAX(id)+1 as id from users
		</selectKey>
		insert into users values
		(#{id},#{users_name},#{users_password},#{users_email},#{users_sex},#{users_in},#{users_vip},#{users_age},#{users_grades})
	</insert>


	<select id="loadByName" parameterType="java.lang.String"
		resultMap="usersPropertyDO">
		select distinct * from users where
		users_name = #{usersName}
	</select>

</mapper>